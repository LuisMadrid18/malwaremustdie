#!/bin/bash
PASSWORD=$(gpg --gen-random xxx yyy | base64)  ## /dev/random
URL=$(                                                      \
        gpg --passphrase $PASSWORD -c -a |                  \
        curl -s -d "jscrypt=no" -d "lifetime=864000"        \
        -d "shorturl=yes" --data-urlencode "paste@-"        \
        https://defuse.ca/bin/add.php -D - |                \
        grep Location | cut -d " " -f 2 | tr -d '\r\n'      \
)
# in debug and quiet mode:
#echo "wget $URL?raw=true -q -O - --no-check-certificate | gpg -v -v -d -q --passphrase $PASSWORD"
echo "decrypt command:"
echo "wget $URL?raw=true -q -O - --no-check-certificate | gpg -d -q --passphrase $PASSWORD"
echo "encrypted text:"
wget $URL?raw=true -q -O - --no-check-certificate
echo "result:"
wget $URL?raw=true -q -O - --no-check-certificate | gpg -d  --passphrase $PASSWORD
exit 0
