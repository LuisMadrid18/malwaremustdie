#!/bin/bash 
#
# Was "multidomainipchecker.sh" wth is too long..
# Need bash (most all of unix bash in it), dig, whois, echo, grep, sed, cut
# I donno linux but in FreeBSD works fine.
# Put your text of domains in domains.txt w/delimiter char13
# script will give stdout per domain checked, no IP/whois/dig result will be skipped fast
# seek for the details.csv for the result/dumped, contents will look like below:
# hwgozzqhjagrweqm.pro,,
# zjgiempwmciorhrf.pro,,
# wjpcjomepafcdwfj.pro,,
# xxxxxx.com,108.162.193.173
# 108.162.193.73,ART.NS.CLOUDFLARE.COM
# DANA.NS.CLOUDFLARE.COM
#
# Original usage: 
# dig $line +short >> ip address
# use this as pipe components for something bigger..
# whois $line >> Lists full details including the name servers 
# whois $line | grep "Name Server" | cut -d ":" -f 2 | sed 's/ //' | sed -e :a -e '$!N;s/ \n/,/;ta'`  
while read domain 
do 
 echo $domain 
  ipaddress=`dig $domain +short` 
  nameserver=`whois $domain | grep "Name Server" | cut -d ":" -f 2 |  sed 's/ //' | sed -e :a -e '$!N;s/ \n/,/;ta'` 
  echo -e "$domain,$ipaddress,$nameserver" >> details.csv
done < domains.txt 
