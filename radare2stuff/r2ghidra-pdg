R2PM_BEGIN

# R2PM_GIT "https://github.com/radareorg/r2ghidra"
# rpm db patch to install r2ghidra quick - has 1 to-edit & 1 omitted line
# @unixfreaxjp 20201215, tokyo, japan
# Change below R2PM_GIT into any local path w/older ghidra git data

R2PM_GIT "~/.local/share/radare2/r2pm/git/r2ghidra"

R2PM_DESC "Ghidra Disassembler, Analysis and Decompiler Plugins"

R2PM_DOC=""

R2PM_INSTALL() {
#	git submodule init && git submodule update || exit 1  # <== omit this line
	rm -rf build # clean build
	mkdir -p build && cd build || exit 1
	cmake -DRADARE2_INSTALL_PLUGDIR="${R2PM_PLUGDIR}" .. || exit 1
	${MAKE} -j4 || exit 1
	${MAKE} install || exit 1
}

R2PM_UNINSTALL() {
	cd build || exit 1
	rm -rf build
	cat install_manifest.txt | xargs rm -rv
	rm -r "${R2PM_PLUGDIR}/r2ghidra_sleigh"
}

R2PM_END
